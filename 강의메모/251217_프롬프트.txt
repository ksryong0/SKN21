PromptTemplate:단순지시
ChatPromptTemplate:롤(역할)을 부여. AI의 롤, 사용자의 롤. 

PromptTemplate 만드는 법: 
Placeholder를 만듬. {변수명}

format과 invoke가 있는 이유?

한국을 프롬프트템플릿에 넣음->프롬프트 템플릿으로 쿼리를 만듬->모델한테 모델에 전달->결과를 받아옴.

이후 나올 내용

          입력값
체인 = 프롬프트->모델 연결.
          인보크
인보크는 체인에 들어갈애가 공통적으로 사용해야되는 메소드.
format은 프롬프트에만 들어가는 메소드.

res = 체인.invoke(프롬프트가 받아야할 입력값)
체인의 invoke를 호출하면, 
프롬프트의 인보크가 호출되고, 그 결과가 모델로들어가서 모델의 invoke가 또 호출됨.

다시 복습 내용
Placeholder는 문장 내용을 그때그때 바꿔 쓰겠다.
MessagesPlaceholder : 메세지들이 삽입될 위치를 지정. 채팅 히스토리를 남길 때 사용. 
LLM은 질문하고 답변만 하는 모델임. 그 내역을 기억하지는 않음. 

멀티모달에서는 컨텐트가 여러개라서 리스트로 묶어서, 딕셔너리로 넣어줌.
이미지, 오디오, 비디오 등은 텍스트랑 같이 보냄. LLM이 이미지만 띡 주면 뭐하라는지 모름.

Base64
이미지나 오디오 등이 안깨지네 전송하기 위한 방법. Base 64임.
인코딩 : 바이너리->64개 문자열로 변경. 
디코딩 : 인코딩 반대로.

-------이 위까지 복습---------

ChatPromptTemplate을 이용한 멀티모달 Prompt 정의

LLM으로부터 답변을 잘 받기위한 프롬프트를 만들어내는거:프롬프트 엔지니어링
프롬프트템플릿:같은 틀 안에서 일부값만 바꿔서 질문할 때 쓰는거.
ChatXXXX : XXXX 모델한테 요청하는거.
	invoke 메소드 호출하고 쿼리 넣어주면 요청.
invoke하면 답변이 나옴.

prompt 	-> model 			-> 응답
P.T		ChatOpenAI등등		Output Parser

다양한 타입의 output parser가 있다. 모델의 응답 객체를 원하는 형태로 값을 뽑아주는 애.
모델의 응답을 딕셔너리로 뽑아내고 싶을 때:아웃풋 파서가 해줌.

1. 요청시 형태를 지정. 너 응답할 때 이렇게 응답해.
2. 응답 받은거를 변환.

1. CommaSeparatedListOutputParser
콤마로 들어온거 리스트로 반환
2. JsonOutputParser
JSON(딕셔너리를 문자열로 표현한 거)형태로 출력.
3. PydanticOutputParser
json을 Pydantic 모델로 변환

주요메소드
parse
get_format_instructions

JsonOutputParser
딕셔너리 같음.
데이터 교환할 때 많이씀.

스키마:응답에 대한 설계도
뭐뭐만 줘

PydanticOutputParser는 데이터 객체로 바꿔줌. 값 조회시 .값이름 으로 조회.
JsonOutputParser는 JSON으로 출력해줌. 값 조회시 대괄호 표기법.

동적타입언어 장점 : 융통성이 있다. 막 바꿀수 있다.
단점 : 프로그램이 불안정하다. 지금 무슨 타입인지 알수가 없다.

변수명:타입

def 이름(a:int, b:str) -> int:
변수명에 타입.
-> 후에는 리턴타입.

Union:두 타입중 아무거나 상관없음
Union이 | 연산자로 바뀜

dataclass는 validation이 안됨

Pydantic:유효성검사, 형변환, 필드(인스턴스 변수)의 기본값 지원, 데이터 직렬화 및 역직렬화(json 변환, 역변환). validation도 해줌.
Field는 검증의 역할이 더 큰 목적임. 파이썬에서의 타입 약점을 해결하기 위함.

invoke는 답변이 한번에 쫙 나옴.
Streaming 방식은 토큰 단위로 옴.
