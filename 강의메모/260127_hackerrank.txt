RDS

데이터 주기적

가용성:장애가 나지 않게 해주겠다.

aws 주의사항 : region을 확인해야함. 바꾸면 내 컴퓨터가 안보임.

--------rds 생성 방법--------------------
rds 검색
데이터베이스 생성 클릭
전체구성
엔진옵션은 mysql
템플릿은 프리티어

my-poll-database

설정
db 인스턴스 식별자 이름 쓰고.
자격 증명 설정
마스터암호 입력 tnwlsdktkfkdgo

연결
ec2컴퓨팅 리소스에 연결
ec2 인스턴스 선택. *주의 : ec2 서버가 실행중이어야만 보인다.

하단 데이터베이스 생성 클릭
-----------------터미널 명령-----------------------------
sudo apt update
sudo apt install -y build-essential pkg-config python3-dev libmariadb-dev libmariadb-dev-compat
sudo apt install mysql-client

mysql -u rds계정명 -p -h 엔드포인트
엔드포인트는 rds에서 데이터베이스 누르고 오른쪽에 엔드포인트 누르고 밑에있는 엔드포인트 복사해야함.
mysql -u admin -p -h my-poll-database.cpa86cw6csn1.ap-northeast-2.rds.amazonaws.com

create database db명
여기서 만든 db명을 settings.py에 넣어줘야함. 언더바는 이름에 못넣음.

mysql 나오려면 exit 입력.
config밑에 settings.py에서
databases에 default 이름을 sqlite3으로 변경.

uv pip install mysqlclient

장고 application 코드 변경되었으니
sudo systemctl daemon-reload
sudo systemctl restart mypoll_chat-wsgi # web app 코드 변경, gunicorn 서비스 설정 변경
sudo systemctl status mypoll_chat-wsgi

python manage.py migrate

public url로 가서 테스트해보면
aws_config 밑에 nginx.txt 파일로 가서 server_name 밑에 client_max_body_size 100M; 추가하고 
sudo nano /etc/nginx/sites-available/mypoll_chat 하고
sudo systemctl daemon-reload
sudo systemctl restart nginx # web app 코드 변경, gunicorn 서비스 설정 변경
sudo systemctl status nginx
해줘야 회원가입이 된다.

----------------깃허브 홈페이지 이동------------------
계정 누르고 settings 클릭
왼쪽 메뉴 맨 밑에 developer settings 클릭
personal access tokens
tokens
generate new token
generate new token(classic)

이름 지정
repo 체크
generate token 클릭.
잘 저장해놔야됨
